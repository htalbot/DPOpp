# generated by wxGlade 0.6.8 on Wed Oct 07 14:10:53 2015
#
# To get wxPerl visit http://wxPerl.sourceforge.net/
#

use Wx 0.15 qw[:allclasses];
use strict;
# begin wxGlade: dependencies
# end wxGlade

# begin wxGlade: extracode
# end wxGlade

package DPOTopicNamesDlg;

use Wx qw[:everything];
use base qw(Wx::Dialog);
use strict;
use Wx::Locale 'gettext' => '_T', 'gettext_noop' => 'gettext_noop';

sub new {
    my( $self, $parent, $id, $title, $pos, $size, $style, $name ) = @_;
    $parent = undef              unless defined $parent;
    $id     = -1                 unless defined $id;
    $title  = ""                 unless defined $title;
    $pos    = wxDefaultPosition  unless defined $pos;
    $size   = wxDefaultSize      unless defined $size;
    $name   = ""                 unless defined $name;

    # begin wxGlade: DPOTopicNamesDlg::new
    $style = wxDEFAULT_DIALOG_STYLE|wxRESIZE_BORDER|wxTHICK_FRAME
        unless defined $style;

    $self = $self->SUPER::new( $parent, $id, $title, $pos, $size, $style, $name );
    $self->{label_1} = Wx::StaticText->new($self, wxID_ANY, _T("Available topics definitions"), wxDefaultPosition, wxDefaultSize, );
    $self->{list_box_topics} = Wx::ListBox->new($self, wxID_ANY, wxDefaultPosition, wxDefaultSize, [], wxLB_SINGLE);
    $self->{label_info} = Wx::StaticText->new($self, wxID_ANY, _T("(If you don't find the desired topic in the combobox,\nmake sure that *_ROOT env. var. is defined for the \nexpected topic.)"), wxDefaultPosition, wxDefaultSize, );
    $self->{button_ok_copy} = Wx::Button->new($self, wxID_ANY, _T("Ok"));
    $self->{button_cancel} = Wx::Button->new($self, wxID_CANCEL, _T("Cancel"));

    $self->__set_properties();
    $self->__do_layout();

    Wx::Event::EVT_BUTTON($self, $self->{button_ok_copy}->GetId, \&on_ok);
    Wx::Event::EVT_BUTTON($self, wxID_CANCEL, \&on_button_cancel);

    # end wxGlade

    $self->{topics_ref} = ();

    return $self;
}


sub __set_properties {
    my $self = shift;
    # begin wxGlade: DPOTopicNamesDlg::__set_properties
    $self->SetTitle(_T("Topic names"));
    $self->{list_box_topics}->SetMinSize(Wx::Size->new(300,300));
    $self->{list_box_topics}->SetSelection(0);
    # end wxGlade
}

sub __do_layout {
    my $self = shift;
    # begin wxGlade: DPOTopicNamesDlg::__do_layout
    $self->{sizer_17} = Wx::BoxSizer->new(wxVERTICAL);
    $self->{sizer_20} = Wx::BoxSizer->new(wxHORIZONTAL);
    $self->{sizer_15} = Wx::BoxSizer->new(wxVERTICAL);
    $self->{sizer_27} = Wx::BoxSizer->new(wxHORIZONTAL);
    $self->{sizer_16} = Wx::BoxSizer->new(wxHORIZONTAL);
    $self->{sizer_17}->Add($self->{label_1}, 0, wxALL|wxALIGN_CENTER_HORIZONTAL, 5);
    $self->{sizer_17}->Add($self->{list_box_topics}, 1, wxALL|wxEXPAND, 5);
    $self->{sizer_17}->Add($self->{label_info}, 0, wxALL|wxEXPAND, 5);
    $self->{sizer_15}->Add($self->{sizer_16}, 0, wxEXPAND, 0);
    $self->{sizer_15}->Add($self->{sizer_27}, 0, wxEXPAND, 0);
    $self->{sizer_17}->Add($self->{sizer_15}, 0, wxEXPAND, 0);
    $self->{sizer_20}->Add($self->{button_ok_copy}, 0, wxALL|wxALIGN_CENTER_HORIZONTAL, 5);
    $self->{sizer_20}->Add($self->{button_cancel}, 0, wxALL, 5);
    $self->{sizer_17}->Add($self->{sizer_20}, 0, wxALL|wxALIGN_CENTER_HORIZONTAL, 5);
    $self->SetSizer($self->{sizer_17});
    $self->{sizer_17}->Fit($self);
    $self->Layout();
    # end wxGlade
}

sub set_topics
{
    my ($self, $topics_ref) = @_;

    $self->{topics_ref} = $topics_ref;

    foreach my $module (@{$topics_ref})
    {
        foreach my $topic (@{$module->{topics}})
        {
            $self->{list_box_topics}->Append("$module->{module_name}:$topic");
        }
    }
}


#######EEEEEEEEEEvent handlers
sub on_ok
{
    my ($self, $event) = @_;

    my $sel = $self->{list_box_topics}->GetSelection();

    if ($sel == Wx::wxNOT_FOUND)
    {
        Wx::MessageBox(
                "You must select a topic.",
                "Importing",
                Wx::wxOK | Wx::wxICON_ERROR);

        $event->Skip;
        return;
    }

    $self->EndModal(Wx::wxID_OK);

    return;

    # wxGlade: DPOTopicNamesDlg::on_ok <event_handler>
    warn "Event handler (on_ok) not implemented";
    $event->Skip;
    # end wxGlade
}


sub on_button_cancel
{
    my ($self, $event) = @_;

    $self->EndModal(Wx::wxID_CANCEL);

    return;

    # wxGlade: DPOTopicNamesDlg::on_button_cancel <event_handler>
    warn "Event handler (on_button_cancel) not implemented";
    $event->Skip;
    # end wxGlade
}


# end of class DPOTopicNamesDlg

1;

